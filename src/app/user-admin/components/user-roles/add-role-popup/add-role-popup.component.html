<form [formGroup]="roleForm" (ngSubmit)="submitForm()" class="bg-white p-6 rounded-md shadow-md space-y-4">
 <div class="box-title text-purple-900 text-2xl">
   {{ (data && data?.isEditMode) ? 'Edit Role' : 'Add New Role' }}
 </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-purple-700">Name</label>
      <input type="text" formControlName="name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm" />
    </div>
    <div>
      <label class="block text-sm font-medium text-purple-700">Title</label>
      <input type="text" formControlName="title" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm" />
    </div>
  </div>

  <!-- Row 2: Code and Root URL -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-purple-700">Code</label>
      <input type="text" formControlName="code" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm" />
    </div>
    <div>
      <label class="block text-sm font-medium text-purple-700">Root URL</label>
      <input type="text" formControlName="rootUrl" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm" />
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-2"> 
  <!-- Exclude URLs -->
<div >
  <mat-label class="block text-sm font-medium text-purple-700 mb-1">Exclude URLs</mat-label>
  <mat-select formControlName="excludeUrl" multiple>
    <mat-option *ngFor="let route of menuRoutes" [value]="route._id">
      {{ route.label }} ({{ route.path }})
    </mat-option>
  </mat-select>

</div>

 <!-- Responsibilities -->
  <div >
    <label class="block text-sm font-medium text-purple-700 mb-1">Responsibilities</label>
    <div *ngFor="let control of responsibilityControls; let i = index" class="flex items-center gap-2 mb-2">
      <input [formControl]="control" class="flex-1 rounded-md border-gray-300 shadow-sm text-sm w-sm
" />
      <button type="button" class="text-red-600 text-sm" (click)="removeResponsibility(i)">Remove</button>
    </div>
    <button type="button" class="text-blue-600 text-sm" (click)="addResponsibility()">Add Responsibility</button>
  </div>
</div>
<!-- Special Privileges -->
<div>
  <label class="block text-sm font-medium text-purple-700 mb-1">Special Privileges</label>
<div *ngFor="let group of specialPrivilegesGroups; let i = index" [formGroup]="group" class="flex gap-2 items-center mb-2">
    <input formControlName="key" placeholder="Key" class="rounded-md border-gray-300 shadow-sm text-sm w-1/2" />
    <input formControlName="value" placeholder="Value" class="rounded-md border-gray-300 shadow-sm text-sm w-1/2" />
    <button type="button" class="text-red-600 text-sm" (click)="removeSpecialPrivilege(i)">Remove</button>
  </div>
  <button type="button" class="text-blue-600 text-sm" (click)="addSpecialPrivilege()">Add Privilege</button>
</div>




  <!-- Assign Routes -->
  <div>
    <div class="flex justify-between items-center mb-2">
      <label class="text-sm font-medium text-purple-700">Assign Routes</label>
      <button type="button" class="text-blue-600 text-sm" (click)="toggleSelectAll()">
        {{ selectAllChecked ? 'Deselect All' : 'Select All' }}
      </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
      <div *ngFor="let route of menuRoutes; let i = index" class="flex items-center space-x-2">
        <input type="checkbox"
               class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"
               [checked]="selectedRoutes.includes(route._id)"
               (change)="onCheckboxChange($event, route._id)" />
        <label class="text-sm text-black-700">{{ route.label }} ({{ route.path }})</label>
      </div>
    </div>
  </div>

  <!-- Submit Button -->
  <div class="pt-4">
     <button type="submit" class="text-white text-sm btn btn-secondary ti-btn ti-btn-secondary">
   {{(data && data?.isEditMode) ? 'Save Changes' : 'Create Role' }}
 </button>
    <button
          type="button"
          class="btn btn-secondary ti-btn ti-btn-soft-secondary"
          (click)="close()"
        >
          Cancel
        </button>
  </div>

</form>
